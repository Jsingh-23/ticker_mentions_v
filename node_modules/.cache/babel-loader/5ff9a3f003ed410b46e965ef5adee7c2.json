{"ast":null,"code":"var _jsxFileName = \"/Users/jaskaranpalsingh/Downloads/ChartJS-in-React-main/src/components/BarChart.js\";\nimport React from 'react';\nimport { defaults, Bar } from 'react-chartjs-2';\nimport data from \"../ticker_data.json\";\nimport '../Chart.css';\nimport App from '../App.js';\ndefaults.global.tooltips.enabled = false;\ndefaults.global.legend.position = 'bottom';\nconst ticks = data; // const sub_names = ['Investing', 'SecurityAnalysis', 'Finance', 'WallStreetBets', 'Options', 'Stocks', 'StockMarket'];\n// const time_filters_list = ['hour','day','week','month','year','all'];\n\nclass BarChart extends React.Component {\n  // sub = sub_names[3];\n  // time = time_filters_list[5];\n  constructor(props) {\n    super(props);\n\n    this.getDataFromDb = () => {\n      fetch('http://localhost:3001/api/getData').then(data => data.json()).then(res => this.setState({\n        mongodb_data: res.data\n      }));\n    };\n\n    this.state = {\n      mongodb_data: [],\n      filtered_mongodb_data: [],\n      data_arr: [],\n      intervalIsSet: false,\n      label_arr: [\"MSFT\", \"PLTR\", \"TSLA\", \"AAPL\", \"TWTR\", \"NFLX\", \"BABA\", \"DIS\", \"AMC\", \"GME\", \"NIO\", \"SNDL\", \"AMZN\"],\n      sub_name: \"WallStreetBets\",\n      sub_time_period: \"Today\"\n    };\n    this.change0 = this.change0.bind(this);\n    this.change1 = this.change1.bind(this);\n    this.change2 = this.change2.bind(this);\n    this.change3 = this.change3.bind(this);\n    this.change4 = this.change4.bind(this);\n  } // filter_mongodb_arr() {\n  //   ti\n  // }\n\n\n  componentDidMount() {\n    this.getDataFromDb();\n\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getDataFromDb, 1000);\n      this.setState({\n        intervalIsSet: interval\n      });\n    } // console.log(this.state.data_arr);\n\n\n    this.change1();\n  }\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({\n        intervalIsSet: null\n      });\n    }\n  }\n\n  // initialChange() {\n  //   this.setState({ })\n  // }\n  change0() {\n    var res = getSubAndTime(\"Investing\", \"all\");\n    this.setState({\n      data_arr: res[2],\n      sub_name: res[0],\n      sub_time_period: res[1]\n    }); // console.log(res[0]);\n  }\n\n  change1() {\n    var res = getSubAndTime(\"WallStreetBets\", \"all\");\n    this.setState({\n      data_arr: res[2],\n      sub_name: res[0],\n      sub_time_period: res[1]\n    }); // console.log(res[0]);\n    // console.log(this.state.mongodb_data);\n  }\n\n  change2() {\n    var res = getSubAndTime(\"Stocks\", \"all\");\n    this.setState({\n      data_arr: res[2],\n      sub_name: res[0],\n      sub_time_period: res[1]\n    }); // console.log(res[0]);\n  }\n\n  change3() {\n    var sub = document.getElementById('sub_name').value;\n    var time = document.getElementById('time_period').value;\n    var res = getSubAndTime(sub, time);\n    this.setState({\n      data_arr: res[2],\n      sub_name: res[0],\n      sub_time_period: res[1]\n    });\n  }\n\n  change4() {\n    var sub = document.getElementById('sub_options').value;\n    var time = document.getElementById('time_options').value;\n    var res = getSubAndTime(sub, time);\n    this.setState({\n      data_arr: res[2],\n      sub_name: res[0],\n      sub_time_period: res[1]\n    });\n  }\n\n  render() {\n    if (this.state.mongodb_data.length != 0) {\n      var new_data_arr = new Array(13);\n\n      for (var i = 0; i < this.state.mongodb_data.length; i++) {\n        new_data_arr[i] = this.state.mongodb_data[i].count;\n      }\n\n      console.log(new_data_arr);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Bar, {\n      data: {\n        labels: this.state.label_arr,\n        datasets: [{\n          label: '# of Mentions',\n          data: new_data_arr,\n          // data: this.state.data_arr,\n          backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)', 'rgba(255, 99, 132, 0.2)', 'rgba(255, 159, 64, 0.2)', 'rgba(255, 205, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(201, 203, 207, 0.2)'],\n          borderColor: ['rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(75, 192, 192)', 'rgb(54, 162, 235)', 'rgb(153, 102, 255)', 'rgb(201, 203, 207)'],\n          borderWidth: 1\n        }]\n      },\n      height: 400,\n      width: 600,\n      options: {\n        maintainAspectRatio: true,\n        tooltips: {\n          enabled: true,\n          mode: 'index'\n        },\n        responsive: false,\n        title: {\n          display: true,\n          text: \"r/\" + this.state.sub_name + \" (\" + this.state.sub_time_period + \")\",\n          fontSize: 25\n        },\n        scales: {\n          yAxes: [{\n            ticks: {\n              beginAtZero: true\n            }\n          }]\n        },\n        legend: {\n          labels: {\n            boxWidth: 0,\n            fontSize: 15\n          }\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"drop_down_form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"choose_sub\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"sub_options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, \"Choose a subreddit: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"sub_options\",\n      name: \"sub_options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Investing\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, \"Investing\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SecurityAnalysis\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, \"SecurityAnalysis\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Finance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, \"Finance\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WallStreetBets\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, \"WallStreetBets\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, \"Options\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Stocks\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }, \"Stocks\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"StockMarket\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, \"StockMarket\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"choose_time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"time_options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, \"Choose a time period: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"time_options\",\n      name: \"time_options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"hour\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }, \"Hour\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"day\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, \"Day\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"week\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, \"Week\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"month\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, \"Month\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"year\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"all\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, \"All\"))), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"submit_button\",\n      type: \"button\",\n      onClick: this.change4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }\n    }, \"Rerender\")));\n  }\n\n}\n\nfunction getSubAndTime(input_subreddit, input_time_period) {\n  var ticker_mentions = [];\n\n  for (let i = 0; i < ticks.tickers.length; i++) {\n    if (ticks.tickers[i].time_period === input_time_period && ticks.tickers[i].subreddit === input_subreddit) {\n      ticker_mentions.push(ticks.tickers[i].mentions);\n    }\n  }\n\n  return [input_subreddit, input_time_period, ticker_mentions];\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/Users/jaskaranpalsingh/Downloads/ChartJS-in-React-main/src/components/BarChart.js"],"names":["React","defaults","Bar","data","App","global","tooltips","enabled","legend","position","ticks","BarChart","Component","constructor","props","getDataFromDb","fetch","then","json","res","setState","mongodb_data","state","filtered_mongodb_data","data_arr","intervalIsSet","label_arr","sub_name","sub_time_period","change0","bind","change1","change2","change3","change4","componentDidMount","interval","setInterval","componentWillUnmount","clearInterval","getSubAndTime","sub","document","getElementById","value","time","render","length","new_data_arr","Array","i","count","console","log","labels","datasets","label","backgroundColor","borderColor","borderWidth","maintainAspectRatio","mode","responsive","title","display","text","fontSize","scales","yAxes","beginAtZero","boxWidth","input_subreddit","input_time_period","ticker_mentions","tickers","time_period","subreddit","push","mentions"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { defaults, Bar } from 'react-chartjs-2'\nimport data from \"../ticker_data.json\"\n\nimport '../Chart.css' \n\nimport App from '../App.js'\n\n\ndefaults.global.tooltips.enabled = false\ndefaults.global.legend.position = 'bottom'\n\nconst ticks = data;\n\n// const sub_names = ['Investing', 'SecurityAnalysis', 'Finance', 'WallStreetBets', 'Options', 'Stocks', 'StockMarket'];\n// const time_filters_list = ['hour','day','week','month','year','all'];\n\nclass BarChart extends React.Component {\n\n  // sub = sub_names[3];\n  // time = time_filters_list[5];\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      mongodb_data: [],\n      filtered_mongodb_data: [],\n      data_arr: [],\n      intervalIsSet: false,\n      label_arr: [\"MSFT\", \"PLTR\", \"TSLA\", \"AAPL\", \"TWTR\", \"NFLX\", \"BABA\", \"DIS\", \"AMC\",\n                  \"GME\", \"NIO\", \"SNDL\", \"AMZN\"],\n      sub_name: \"WallStreetBets\",\n      sub_time_period: \"Today\"\n    }\n    this.change0 = this.change0.bind(this);\n    this.change1 = this.change1.bind(this);\n    this.change2 = this.change2.bind(this);\n    this.change3 = this.change3.bind(this);\n    this.change4 = this.change4.bind(this);\n  }\n\n  // filter_mongodb_arr() {\n  //   ti\n  // }\n\n  componentDidMount() {\n    this.getDataFromDb();\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getDataFromDb, 1000);\n      this.setState({ intervalIsSet: interval });\n    }\n    // console.log(this.state.data_arr);\n    this.change1();\n    \n  }\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({ intervalIsSet: null });\n    }\n  }\n\n  getDataFromDb = () => {\n    fetch('http://localhost:3001/api/getData')\n      .then((data) => data.json())\n      .then((res) => this.setState({ mongodb_data: res.data }))\n  }\n\n  // initialChange() {\n  //   this.setState({ })\n  // }\n\n  change0() {\n    var res = getSubAndTime(\"Investing\", \"all\");\n    this.setState({ data_arr: res[2] , sub_name: res[0], sub_time_period: res[1] })\n    // console.log(res[0]);\n  }\n\n  change1() {\n    var res = getSubAndTime(\"WallStreetBets\", \"all\");\n    this.setState({ data_arr: res[2] , sub_name: res[0], sub_time_period: res[1] })\n    // console.log(res[0]);\n    // console.log(this.state.mongodb_data);\n  }\n\n  change2() {\n    var res = getSubAndTime(\"Stocks\", \"all\");\n    this.setState({ data_arr: res[2] , sub_name: res[0], sub_time_period: res[1] })\n    // console.log(res[0]);\n  }\n\n  change3() {\n    var sub = document.getElementById('sub_name').value;\n    var time = document.getElementById('time_period').value;\n    var res = getSubAndTime(sub, time);\n    this.setState({ data_arr: res[2], sub_name: res[0], sub_time_period: res[1] });\n  }\n\n  change4() {\n    var sub = document.getElementById('sub_options').value;\n    var time = document.getElementById('time_options').value;\n    var res = getSubAndTime(sub, time);\n    this.setState({ data_arr: res[2], sub_name: res[0], sub_time_period: res[1] })\n  }\n  \n  render() {\n    if (this.state.mongodb_data.length != 0) {\n      var new_data_arr = new Array(13);\n      for (var i = 0; i < this.state.mongodb_data.length; i++) {\n        new_data_arr[i] = this.state.mongodb_data[i].count;\n      }\n      console.log(new_data_arr);\n    }\n    return (\n      <div>\n        <Bar\n          data={{\n            labels: this.state.label_arr,\n            datasets: [\n              {\n                label: '# of Mentions',\n                data: new_data_arr,\n                // data: this.state.data_arr,\n                backgroundColor: [\n                  'rgba(255, 99, 132, 0.2)',\n                  'rgba(54, 162, 235, 0.2)',\n                  'rgba(255, 206, 86, 0.2)',\n                  'rgba(75, 192, 192, 0.2)',\n                  'rgba(153, 102, 255, 0.2)',\n                  'rgba(255, 159, 64, 0.2)',\n                  'rgba(255, 99, 132, 0.2)',\n                  'rgba(255, 159, 64, 0.2)',\n                  'rgba(255, 205, 86, 0.2)',\n                  'rgba(75, 192, 192, 0.2)',\n                  'rgba(54, 162, 235, 0.2)',\n                  'rgba(153, 102, 255, 0.2)',\n                  'rgba(201, 203, 207, 0.2)'\n                ],\n                borderColor: [\n                  'rgb(255, 99, 132)',\n                  'rgb(255, 159, 64)',\n                  'rgb(255, 205, 86)',\n                  'rgb(75, 192, 192)',\n                  'rgb(54, 162, 235)',\n                  'rgb(153, 102, 255)',\n                  'rgb(201, 203, 207)'\n                ],\n                borderWidth: 1,\n              },\n            ],\n          }}\n          height={400}\n          width={600}\n          options={{\n            maintainAspectRatio: true,\n            tooltips: {\n              enabled: true,\n              mode: 'index'\n            },\n            responsive: false,\n            title: {\n              display: true,\n              text: \"r/\" + this.state.sub_name + \" (\" + this.state.sub_time_period + \")\",\n              fontSize: 25\n            },\n            scales: {\n              yAxes: [\n                {\n                  ticks: {\n                    beginAtZero: true,\n                  },\n                },\n              ],\n            },\n            legend: {\n              labels: {\n                boxWidth: 0,\n                fontSize: 15,\n              },\n            },\n          }}\n        /> \n        <br></br>\n        <br></br>\n\n        <form id=\"drop_down_form\"> \n\n\n\n          <div id=\"choose_sub\" >\n\n          <label htmlFor=\"sub_options\">Choose a subreddit: </label>\n          <select id=\"sub_options\" name=\"sub_options\">\n            <option value=\"Investing\">Investing</option>\n            <option value=\"SecurityAnalysis\">SecurityAnalysis</option>\n            <option value=\"Finance\">Finance</option>\n            <option value=\"WallStreetBets\">WallStreetBets</option>\n            <option value=\"Options\">Options</option>\n            <option value=\"Stocks\">Stocks</option>\n            <option value=\"StockMarket\">StockMarket</option>\n          </select>\n          </div>\n\n\n          <div id=\"choose_time\" >\n          <label htmlFor=\"time_options\">Choose a time period: </label>\n          <select id=\"time_options\" name=\"time_options\">\n            <option value=\"hour\">Hour</option>\n            <option value=\"day\">Day</option>\n            <option value=\"week\">Week</option>\n            <option value=\"month\">Month</option>\n            <option value=\"year\">Year</option>\n            <option value=\"all\">All</option>\n          </select>\n          </div>\n          \n\n\n          <button id=\"submit_button\" type=\"button\" onClick={this.change4}>Rerender</button>\n        </form>\n\n      </div>\n    )    \n  }\n}\n\nfunction getSubAndTime(input_subreddit, input_time_period){\n  var ticker_mentions = [];\n  for (let i = 0; i < ticks.tickers.length; i++){\n    if (ticks.tickers[i].time_period === input_time_period && ticks.tickers[i].subreddit === input_subreddit){\n      ticker_mentions.push(ticks.tickers[i].mentions);\n    }\n  }\n  return [input_subreddit,input_time_period,ticker_mentions];  \n}\n\nexport default BarChart"]},"metadata":{},"sourceType":"module"}